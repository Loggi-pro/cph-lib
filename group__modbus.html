<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cph_lib: Modbus</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">cph_lib
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Peripheral abstraction library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Modbus</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__modbus__registers"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modbus__registers.html">Modbus Registers</a></td></tr>
<tr class="memdesc:group__modbus__registers"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a callback handler for a given function code. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gaf1398cbbeb317b1dbd0276b275f5b0f8"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modbus.html#gaf1398cbbeb317b1dbd0276b275f5b0f8">eMBRegisterMode</a> { <br />
&#160;&#160;<a class="el" href="group__modbus.html#ggaf1398cbbeb317b1dbd0276b275f5b0f8aa210c1d03e2745efb42486b822740d4b">MB_REG_READ</a>, 
<br />
&#160;&#160;<a class="el" href="group__modbus.html#ggaf1398cbbeb317b1dbd0276b275f5b0f8a3d0a62208562b69c5e7692a5a168c14e">MB_REG_WRITE</a>
<br />
 }</td></tr>
<tr class="memdesc:gaf1398cbbeb317b1dbd0276b275f5b0f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">If register should be written or read.  <a href="group__modbus.html#gaf1398cbbeb317b1dbd0276b275f5b0f8">More...</a><br /></td></tr>
<tr class="separator:gaf1398cbbeb317b1dbd0276b275f5b0f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga27174a168f33d59a72737fb92b1cf46e"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modbus.html#ga27174a168f33d59a72737fb92b1cf46e">MBErrorCode</a> { <br />
&#160;&#160;<a class="el" href="group__modbus.html#gga27174a168f33d59a72737fb92b1cf46eabf4c1fb8c72eafc08be972225613fe2b">MB_ENOERR</a>, 
<br />
&#160;&#160;<a class="el" href="group__modbus.html#gga27174a168f33d59a72737fb92b1cf46eaf415371aad180c545b726d39adbf9ba7">MB_ENOREG</a>, 
<br />
&#160;&#160;<a class="el" href="group__modbus.html#gga27174a168f33d59a72737fb92b1cf46eafa57cdb3f85e8ab4baf160579104d624">MB_EINVAL</a>, 
<br />
&#160;&#160;<a class="el" href="group__modbus.html#gga27174a168f33d59a72737fb92b1cf46ea539fb138411468b12c05556157c6864d">MB_EPORTERR</a>, 
<br />
&#160;&#160;<a class="el" href="group__modbus.html#gga27174a168f33d59a72737fb92b1cf46eaf0700c1e37bfc75068e6577bc0b04bb8">MB_ENORES</a>, 
<br />
&#160;&#160;<a class="el" href="group__modbus.html#gga27174a168f33d59a72737fb92b1cf46eaf6eed4a1c490af14b7467be1e6e2fe67">MB_EIO</a>, 
<br />
&#160;&#160;<a class="el" href="group__modbus.html#gga27174a168f33d59a72737fb92b1cf46eaf0e64a209ac1a01935167c6986338a6f">MB_EILLSTATE</a>, 
<br />
&#160;&#160;<a class="el" href="group__modbus.html#gga27174a168f33d59a72737fb92b1cf46ea017c559e956f718cf77aafe269f49bd5">MB_ETIMEDOUT</a>, 
<br />
&#160;&#160;<a class="el" href="group__modbus.html#gga27174a168f33d59a72737fb92b1cf46eafa030eb4a09d1665726582592e7e716d">MB_ILLEGAL_DATA</a>
<br />
 }</td></tr>
<tr class="memdesc:ga27174a168f33d59a72737fb92b1cf46e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Errorcodes used by all function in the protocol stack.  <a href="group__modbus.html#ga27174a168f33d59a72737fb92b1cf46e">More...</a><br /></td></tr>
<tr class="separator:ga27174a168f33d59a72737fb92b1cf46e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga808890cfd0937a588aaca2b04051994d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__modbus.html#ga27174a168f33d59a72737fb92b1cf46e">MBErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modbus.html#ga808890cfd0937a588aaca2b04051994d">Modbus::init</a> (TransportAdapter *transport, TimerAdapter *timer, uint8_t slaveAddress)</td></tr>
<tr class="memdesc:ga808890cfd0937a588aaca2b04051994d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the Modbus protocol stack.  <a href="group__modbus.html#ga808890cfd0937a588aaca2b04051994d">More...</a><br /></td></tr>
<tr class="separator:ga808890cfd0937a588aaca2b04051994d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2206d2a347063e31a8f98693841eb2c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__modbus.html#ga27174a168f33d59a72737fb92b1cf46e">MBErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modbus.html#ga2206d2a347063e31a8f98693841eb2c1">Modbus::close</a> ()</td></tr>
<tr class="memdesc:ga2206d2a347063e31a8f98693841eb2c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release resources used by the protocol stack.  <a href="group__modbus.html#ga2206d2a347063e31a8f98693841eb2c1">More...</a><br /></td></tr>
<tr class="separator:ga2206d2a347063e31a8f98693841eb2c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4138072436ccd10c24c63e7a7b481fab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__modbus.html#ga27174a168f33d59a72737fb92b1cf46e">MBErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modbus.html#ga4138072436ccd10c24c63e7a7b481fab">Modbus::enable</a> ()</td></tr>
<tr class="memdesc:ga4138072436ccd10c24c63e7a7b481fab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable the Modbus protocol stack.  <a href="group__modbus.html#ga4138072436ccd10c24c63e7a7b481fab">More...</a><br /></td></tr>
<tr class="separator:ga4138072436ccd10c24c63e7a7b481fab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6bdf864310ca51646b8c73154d3dfc63"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__modbus.html#ga27174a168f33d59a72737fb92b1cf46e">MBErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modbus.html#ga6bdf864310ca51646b8c73154d3dfc63">Modbus::disable</a> ()</td></tr>
<tr class="memdesc:ga6bdf864310ca51646b8c73154d3dfc63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the Modbus protocol stack.  <a href="group__modbus.html#ga6bdf864310ca51646b8c73154d3dfc63">More...</a><br /></td></tr>
<tr class="separator:ga6bdf864310ca51646b8c73154d3dfc63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga83b08f6d10d841198aef0b9818bebe45"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__modbus.html#ga27174a168f33d59a72737fb92b1cf46e">MBErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modbus.html#ga83b08f6d10d841198aef0b9818bebe45">Modbus::poll</a> ()</td></tr>
<tr class="memdesc:ga83b08f6d10d841198aef0b9818bebe45"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main pooling loop of the Modbus protocol stack.  <a href="group__modbus.html#ga83b08f6d10d841198aef0b9818bebe45">More...</a><br /></td></tr>
<tr class="separator:ga83b08f6d10d841198aef0b9818bebe45"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;mb.h&quot;</span> </div>
</div><!-- fragment --><p>This module defines the interface for the application. It contains the basic functions and types required to use the Modbus protocol stack. A typical application will want to call eMBInit() first. If the device is ready to answer network requests it must then call eMBEnable() to activate the protocol stack. In the main loop the function eMBPoll() must be called periodically. The time interval between pooling depends on the configured Modbus timeout. If an RTOS is available a separate task should be created and the task should always call the function eMBPoll().</p>
<div class="fragment"><div class="line"><span class="comment">// Initialize protocol stack in RTU mode for a slave with address 10 = 0x0A</span></div>
<div class="line">eMBInit( MB_RTU, 0x0A, 38400, MB_PAR_EVEN );</div>
<div class="line"><span class="comment">// Enable the Modbus Protocol Stack.</span></div>
<div class="line">eMBEnable(  );</div>
<div class="line"><span class="keywordflow">for</span>( ;; )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Call the main polling loop of the Modbus protocol stack.</span></div>
<div class="line">    eMBPoll(  );</div>
<div class="line">    ...</div>
<div class="line">}</div>
</div><!-- fragment --> <h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gaf1398cbbeb317b1dbd0276b275f5b0f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf1398cbbeb317b1dbd0276b275f5b0f8">&#9670;&nbsp;</a></span>eMBRegisterMode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__modbus.html#gaf1398cbbeb317b1dbd0276b275f5b0f8">eMBRegisterMode</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If register should be written or read. </p>
<p>This value is passed to the callback functions which support either reading or writing register values. Writing means that the application registers should be updated and reading means that the modbus protocol stack needs to know the current register values.</p>
<dl class="section see"><dt>See also</dt><dd>eMBRegHoldingCB( ), eMBRegCoilsCB( ), eMBRegDiscreteCB( ) and eMBRegInputCB( ). </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggaf1398cbbeb317b1dbd0276b275f5b0f8aa210c1d03e2745efb42486b822740d4b"></a>MB_REG_READ&#160;</td><td class="fielddoc"><p>Read register values and pass to protocol stack. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf1398cbbeb317b1dbd0276b275f5b0f8a3d0a62208562b69c5e7692a5a168c14e"></a>MB_REG_WRITE&#160;</td><td class="fielddoc"><p>Update register values. </p>
</td></tr>
</table>

</div>
</div>
<a id="ga27174a168f33d59a72737fb92b1cf46e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga27174a168f33d59a72737fb92b1cf46e">&#9670;&nbsp;</a></span>MBErrorCode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__modbus.html#ga27174a168f33d59a72737fb92b1cf46e">MBErrorCode</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Errorcodes used by all function in the protocol stack. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga27174a168f33d59a72737fb92b1cf46eabf4c1fb8c72eafc08be972225613fe2b"></a>MB_ENOERR&#160;</td><td class="fielddoc"><p>no error. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga27174a168f33d59a72737fb92b1cf46eaf415371aad180c545b726d39adbf9ba7"></a>MB_ENOREG&#160;</td><td class="fielddoc"><p>illegal register address. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga27174a168f33d59a72737fb92b1cf46eafa57cdb3f85e8ab4baf160579104d624"></a>MB_EINVAL&#160;</td><td class="fielddoc"><p>illegal argument. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga27174a168f33d59a72737fb92b1cf46ea539fb138411468b12c05556157c6864d"></a>MB_EPORTERR&#160;</td><td class="fielddoc"><p>porting layer error. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga27174a168f33d59a72737fb92b1cf46eaf0700c1e37bfc75068e6577bc0b04bb8"></a>MB_ENORES&#160;</td><td class="fielddoc"><p>insufficient resources. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga27174a168f33d59a72737fb92b1cf46eaf6eed4a1c490af14b7467be1e6e2fe67"></a>MB_EIO&#160;</td><td class="fielddoc"><p>I/O error. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga27174a168f33d59a72737fb92b1cf46eaf0e64a209ac1a01935167c6986338a6f"></a>MB_EILLSTATE&#160;</td><td class="fielddoc"><p>protocol stack in illegal state. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga27174a168f33d59a72737fb92b1cf46ea017c559e956f718cf77aafe269f49bd5"></a>MB_ETIMEDOUT&#160;</td><td class="fielddoc"><p>timeout error occurred. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga27174a168f33d59a72737fb92b1cf46eafa030eb4a09d1665726582592e7e716d"></a>MB_ILLEGAL_DATA&#160;</td><td class="fielddoc"><p>illegal data value. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga808890cfd0937a588aaca2b04051994d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga808890cfd0937a588aaca2b04051994d">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__modbus.html#ga27174a168f33d59a72737fb92b1cf46e">MBErrorCode</a> Modbus::init </td>
          <td>(</td>
          <td class="paramtype">TransportAdapter *&#160;</td>
          <td class="paramname"><em>transport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TimerAdapter *&#160;</td>
          <td class="paramname"><em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slaveAddress</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the Modbus protocol stack. </p>
<p>This functions initializes the ASCII or RTU module and calls the init functions of the porting layer to prepare the hardware. Please note that the receiver is still disabled and no Modbus frames are processed until eMBEnable( ) has been called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eMode</td><td>If ASCII or RTU mode should be used. </td></tr>
    <tr><td class="paramname">ucSlaveAddress</td><td>The slave address. Only frames sent to this address or to the broadcast address are processed. </td></tr>
    <tr><td class="paramname">ucPort</td><td>The port to use. E.g. 1 for COM1 on windows. This value is platform dependent and some ports simply choose to ignore it. </td></tr>
    <tr><td class="paramname">ulBaudRate</td><td>The baudrate. E.g. 19200. Supported baudrates depend on the porting layer. </td></tr>
    <tr><td class="paramname">eParity</td><td>Parity used for serial transmission.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If no error occurs the function returns eMBErrorCode::MB_ENOERR. The protocol is then in the disabled state and ready for activation by calling eMBEnable( ). Otherwise one of the following error codes is returned:<ul>
<li>eMBErrorCode::MB_EINVAL If the slave address was not valid. Valid slave addresses are in the range 1 - 247.</li>
<li>eMBErrorCode::MB_EPORTERR IF the porting layer returned an error. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga2206d2a347063e31a8f98693841eb2c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2206d2a347063e31a8f98693841eb2c1">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__modbus.html#ga27174a168f33d59a72737fb92b1cf46e">MBErrorCode</a> Modbus::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release resources used by the protocol stack. </p>
<p>This function disables the Modbus protocol stack and release all hardware resources. It must only be called when the protocol stack is disabled.</p>
<dl class="section note"><dt>Note</dt><dd>Note all ports implement this function. A port which wants to get an callback must define the macro MB_PORT_HAS_CLOSE to 1.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>If the resources where released it return eMBErrorCode::MB_ENOERR. If the protocol stack is not in the disabled state it returns eMBErrorCode::MB_EILLSTATE. </dd></dl>

</div>
</div>
<a id="ga4138072436ccd10c24c63e7a7b481fab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4138072436ccd10c24c63e7a7b481fab">&#9670;&nbsp;</a></span>enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__modbus.html#ga27174a168f33d59a72737fb92b1cf46e">MBErrorCode</a> Modbus::enable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable the Modbus protocol stack. </p>
<p>This function enables processing of Modbus frames. Enabling the protocol stack is only possible if it is in the disabled state.</p>
<dl class="section return"><dt>Returns</dt><dd>If the protocol stack is now in the state enabled it returns eMBErrorCode::MB_ENOERR. If it was not in the disabled state it return eMBErrorCode::MB_EILLSTATE. </dd></dl>

</div>
</div>
<a id="ga6bdf864310ca51646b8c73154d3dfc63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6bdf864310ca51646b8c73154d3dfc63">&#9670;&nbsp;</a></span>disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__modbus.html#ga27174a168f33d59a72737fb92b1cf46e">MBErrorCode</a> Modbus::disable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable the Modbus protocol stack. </p>
<p>This function disables processing of Modbus frames.</p>
<dl class="section return"><dt>Returns</dt><dd>If the protocol stack has been disabled it returns eMBErrorCode::MB_ENOERR. If it was not in the enabled state it returns eMBErrorCode::MB_EILLSTATE. </dd></dl>

</div>
</div>
<a id="ga83b08f6d10d841198aef0b9818bebe45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga83b08f6d10d841198aef0b9818bebe45">&#9670;&nbsp;</a></span>poll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__modbus.html#ga27174a168f33d59a72737fb92b1cf46e">MBErrorCode</a> Modbus::poll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The main pooling loop of the Modbus protocol stack. </p>
<p>This function must be called periodically. The timer interval required is given by the application dependent Modbus slave timeout. Internally the function calls xMBPortEventGet() and waits for an event from the receiver or transmitter state machines.</p>
<dl class="section return"><dt>Returns</dt><dd>If the protocol stack is not in the enabled state the function returns eMBErrorCode::MB_EILLSTATE. Otherwise it returns eMBErrorCode::MB_ENOERR. </dd></dl>
<p>Modbus broadcast address.</p>
<p>&lt; Offset of function code in PDU.</p>
<p>Modbus broadcast address.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
